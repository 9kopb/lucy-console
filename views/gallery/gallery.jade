doctype html
html
  head
    title API Gallery
    link(href='https://fonts.googleapis.com/css?family=Roboto+Mono' rel='stylesheet' type='text/css')
    | !{assetManager.renderCSS('gallery')}
    | !{assetManager.renderJS('gallery')}
    script.
      var BASE_PATH = "#{basePath}";
  body(ng-app="App" ng-cloak)
    .container(ng-controller="Body")
      #APIs(ng-controller="APIs")
        .heading
          h1.large.text-center= galleryInfo.title
        .row(ng-if="loading")
          .col-xs-12.col-sm-8.col-sm-offset-2.col-lg-4.col-lg-offset-4
            .alert.alert-default
              p Loading...
                span.fa.fa-refresh.fa-spin.pull-right
        .row.list-controls(ng-show="!loading")
          .col-xs-12
            .row
              .col-xs-12.col-sm-10
                div(ng-class="{'input-group': tags.length}")
                  input.form-control(type="text" ng-model="query" placeholder="Search for APIs..." ng-change="queryChanged()")
                  .input-group-btn(ng-show="tags.length")
                    button.btn.btn-default.dropdown-toggle(type='button' data-toggle="dropdown")
                      | {{ activeTag || 'Filter' }}
                      span &nbsp;&nbsp;
                      i.fa.fa-caret
                    ul.dropdown-menu
                      li(ng-repeat="tag in tags")
                        a(ng-click="activeTag = tag") {{ tag }}
              .hidden-xs.col-sm-2
                .btn-group.pull-right
                  a.btn.btn-default(
                      title="Show gallery view"
                      ng-click="viewStyle='gallery'" ng-class="{active: viewStyle === 'gallery' || !viewStyle}")
                    span.fa.fa-th
                  a.btn.btn-default(
                      title="Show list view"
                      ng-click="viewStyle='list'" ng-class="{active: viewStyle === 'list'}")
                    span.fa.fa-bars
        .apis.infinite-scroll(infinite-scroll="showNext()" infinite-scroll-distance="3")
          .row
            .api-col-container(ng-repeat="api in apis"
                               ng-if="$index < apisToShow || apisToShow === -1"
                               ng-controller="API")
              mixin apilink
                a.link-fill(href="#{basePath}/{{ api.name }}" target="_blank")
              .filter-guard(ng-show="!query || api.info.title.toLowerCase().indexOf(query.toLowerCase()) !== -1 || (api.info.description && api.info.description.toLowerCase().indexOf(query.toLowerCase()) !== -1)")
                .gallery-view.hidden-xs(ng-show="!viewStyle || viewStyle === 'gallery'")
                  include ./panel-view.jade
                .list-view.hidden-xs(ng-show="viewStyle === 'list'")
                  include ./list-view.jade
                .xs-view.visible-xs
                  include ./xs-view.jade
